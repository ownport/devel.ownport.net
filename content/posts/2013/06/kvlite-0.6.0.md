Title: kvlite, доступна новая версия 0.6.0
Author: d.rey
Date: 2013-06-30 20:25:00
Slug: kvlite-0.6.0
Tags: collection, mysql, kvlite, sqlite, key-value, python, json, database

Новая версия kvlite 0.6.0 доступна на [pypi](https://pypi.python.org/pypi/kvlite) и [github](https://github.com/ownport/kvlite) в master ветви. Я не стал выделять описание версии v0.5.1 от v0.6.0 так как разница
между их выходами была не велика. Единственное отличие версии v0.6.0 от предыдущих, не функциональное.
Оно больше связано с разбивкой kvlite на модули, в то время как раньше весь код хранился в одном файле.

**kvlite.py**

- Обновлена [kvlite диаграмма](https://raw.github.com/ownport/kvlite/master/docs/kvlite.png)
- Обновлена [документация](https://github.com/ownport/kvlite/blob/master/README.rst)
- При создании kvlite коллекции создается документ с ключом 0000.. (все нули). Этот документ
используется для хранения метаданных о базе данных: версия kvlite, тип сериализатора, название и 
описание коллекции, теги. Метаданные всегда сериализуются cPickleSerializer,вне зависимости от того, 
какой сериализатор выбран для остальных данных.
- Исправлена ошибка с заполнением ключа. Проблема проявлялась в случаях, когда использовался backend на базе
sqlite. В связи с тем, что для sqlite based коллекции используется тип поля VARCHAR для хранения ключа, документы с ключами 1 и 01 будут сохранены как два разных документа. Это отличалось от логики работы с mysql
backend, в котором для хранения данных используется тип BINARY и ключ автоматически заполнялся нулями
до необходимой длины. В текущем релизе две команды `put('1', {...})` и `put('01', {...})` будут оперировать
с одним ключом `0000..0001` вне зависимости от backend. Число нулей определяется длиной ключа.
- добавлена функция copy() для быстрого копирования данных одной базыы данных в другую.
- метод `put(k,v)` позволяет добавлять сразу несколько пар ключ/значение: `put([(k1,v1),(k2,v2),(k3,v3)])`
- упрощен доступ с документам коллеции, вызов метода get() не обязателен. `kv = [(k,v) for k,v in collection]`

**kvlite-cli.py**

- поддерживает функциональность kvlite v0.5.1 и v0.6.0
- для команды `put` используется json формат для описания документа
- добавлен вывод дополнительной информации о коллекции: версия kvlite, тип сериализатора, имя, 
описание, ...
- при экспорте данных `export` выполняется проверка существования результирующего файла

Полный список изменений для версий [v0.5.1](https://github.com/ownport/kvlite/issues?milestone=2&state=closed) и [v0.6.0](https://github.com/ownport/kvlite/issues?milestone=3&state=closed) доступен на [github](https://github.com/ownport)




